{"version":3,"sources":["webpack:///./src/components/music-list/music-list.vue?8a28","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?3c78","webpack:///./src/components/music-list/music-list.vue?536f","webpack:///./src/components/music-list/music-list.vue?4003","webpack:///./src/api/rank.ts","webpack:///./src/views/top-list/top-list.vue?f0e6","webpack:///./src/views/top-list/top-list.vue?87fc","webpack:///./src/views/top-list/top-list.vue","webpack:///./src/views/top-list/top-list.vue?7f5e","webpack:///./src/views/top-list/top-list.vue?027a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","domProps","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","random","_v","attrs","listenScroll","probeType","scroll","rank","selectItem","staticRenderFns","RESERVED_HEIGHT","transform","backdrop","scrollY","imageHeight","$refs","bgImage","clientHeight","minTranslateY","list","$el","top","playlist","bottom","refresh","item","index","mid","then","vkey","url","console","log","setPlaylistUrl","selectPlay","pos","y","$router","randomPlay","newVal","translateY","Math","max","scale","zIndex","blur","percent","abs","min","layer","filter","paddingTop","height","playBtn","display","type","String","default","Array","Boolean","components","Scroll","Loading","SongList","component","getTopList","data","Object","assign","uin","needNewCode","platform","getMusicList","topid","tpl","page","_getMusicList","topList","id","res","code","_normalizeSongs","songlist","push","ret","forEach","musicData","songid","albummid","topTitle","image","MusicList"],"mappings":"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","file":"js/chunk-b014478a.4eecf5c3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length>0),expression:\"songs.length>0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"data\":_vm.songs,\"listen-scroll\":_vm.listenScroll,\"probe-type\":_vm.probeType},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"select\":_vm.selectItem}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport Scroll from '@/components/scroll/scroll.vue'\r\nimport Loading from '@/components/loading/loading.vue'\r\nimport { prefixStyle } from '@/common/ts/dom'\r\nimport SongList from '@/components/song-list/song-list.vue'\r\nimport { Action, Mutation } from 'vuex-class'\r\nimport { PlaylistMixin } from '@/common/ts/mixin'\r\nimport { getplaysongvkey } from '@/api/song'\r\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\r\nimport { Pos } from '@/types/scroll'\r\nimport { CreateSongType } from '@/types/song'\r\n\r\nconst RESERVED_HEIGHT = 40\r\nconst transform: any = prefixStyle('transform')\r\nconst backdrop: any = prefixStyle('backdropFilter')\r\n\r\n@Component({\r\n  components: {\r\n    Scroll,\r\n    Loading,\r\n    SongList\r\n  }\r\n})\r\nexport default class MusicList extends PlaylistMixin {\r\n  @Action('selectPlay') selectPlay!: Function;\r\n  @Action('randomPlay') randomPlay!: Function;\r\n  @Mutation('SET_PLAYLIST_URL') setPlaylistUrl!: Function;\r\n  @Prop({ type: String, default: '' }) bgImage!: string;\r\n  @Prop({ type: Array, default: function () { return [] } }) songs!: CreateSongType[];\r\n  @Prop({ type: String, default: '' }) title!: string;\r\n  @Prop({ type: Boolean, default: false }) rank!: boolean;\r\n  private scrollY = 0;\r\n  private probeType!: number;\r\n  private listenScroll!: boolean;\r\n  private imageHeight!: number;\r\n  private minTranslateY!: number;\r\n  get bgStyle () {\r\n    return `background-image:url(${this.bgImage})`\r\n  }\r\n\r\n  private created () {\r\n    this.probeType = 3\r\n    this.listenScroll = true\r\n  }\r\n\r\n  protected mounted () {\r\n    this.imageHeight = (this.$refs.bgImage as HTMLElement).clientHeight\r\n    this.minTranslateY = -this.imageHeight + RESERVED_HEIGHT;\r\n    ((this.$refs.list as Vue).$el as HTMLElement).style.top = `${this.imageHeight}px`\r\n  }\r\n\r\n  protected handlePlaylist (playlist: CreateSongType[]) {\r\n    const bottom = playlist.length > 0 ? '60px' : '';\r\n    ((this.$refs.list as Vue).$el as HTMLElement).style.bottom = bottom;\r\n    (this.$refs.list as any).refresh()\r\n  }\r\n\r\n  private selectItem (item: CreateSongType, index: number) {\r\n    getplaysongvkey(item.mid).then((vkey) => {\r\n      const url = `http://dl.stream.qqmusic.qq.com/${vkey}`\r\n      console.log(url)\r\n      this.setPlaylistUrl({\r\n        index,\r\n        url\r\n      })\r\n    })\r\n    this.selectPlay({ list: this.songs, index })\r\n  }\r\n\r\n  private scroll (pos: Pos) {\r\n    this.scrollY = pos.y\r\n  }\r\n\r\n  private back () {\r\n    this.$router.back()\r\n  }\r\n\r\n  private random () {\r\n    this.randomPlay({ list: this.songs })\r\n  }\r\n\r\n  @Watch('scrollY') scrollYChanged (newVal: number) {\r\n    const translateY = Math.max(this.minTranslateY, newVal)\r\n    let scale = 1\r\n    let zIndex = 0\r\n    let blur = 0\r\n    const percent = Math.abs(newVal / this.imageHeight)\r\n    if (newVal > 0) {\r\n      scale = 1 + percent\r\n      zIndex = 10\r\n    } else {\r\n      blur = Math.min(20, percent * 20)\r\n    }\r\n\r\n    (this.$refs.layer as HTMLElement).style[transform] = `translate3d(0,${translateY}px,0`;\r\n    (this.$refs.filter as HTMLElement).style[backdrop] = `blur(${blur}px)`\r\n    if (newVal < this.minTranslateY) {\r\n      zIndex = 10;\r\n      (this.$refs.bgImage as HTMLElement).style.paddingTop = 0 + '';\r\n      (this.$refs.bgImage as HTMLElement).style.height = `${RESERVED_HEIGHT}px`;\r\n      (this.$refs.playBtn as HTMLElement).style.display = 'none'\r\n    } else {\r\n      (this.$refs.bgImage as HTMLElement).style.paddingTop = '70%';\r\n      (this.$refs.bgImage as HTMLElement).style.height = 0 + '';\r\n      (this.$refs.playBtn as HTMLElement).style.display = ''\r\n    }\r\n    (this.$refs.bgImage as HTMLElement).style[transform] = `scale(${scale})`;\r\n    (this.$refs.bgImage as HTMLElement).style.zIndex = zIndex + ''\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=a6af0a3e&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=ts&\"\nexport * from \"./music-list.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=a6af0a3e&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a6af0a3e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=a6af0a3e&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=a6af0a3e&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","import jsonp from '@/common/ts/jsonp'\r\nimport {commonParams, options} from './config'\r\n\r\nexport function getTopList () {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    uin: 0,\r\n    needNewCode: 1,\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\nexport function getMusicList (topid: number) {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    topid,\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=style&index=0&id=5a561fd6&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=style&index=0&id=5a561fd6&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"rank\":_vm.rank,\"title\":_vm.title,\"bg-image\":_vm.bgImage,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\r\nimport MusicList from '@/components/music-list/music-list.vue'\r\nimport { getMusicList } from '@/api/rank'\r\nimport { ERR_OK } from '@/api/config'\r\nimport { Getter } from 'vuex-class'\r\nimport { createSong } from '@/common/ts/song'\r\nimport { Vue, Component } from 'vue-property-decorator'\r\nimport { GetTopListTopListItem, GetMusicListResponse, GetMusicListSonglistItem } from '@/types/rank'\r\nimport { CreateSongType } from '@/types/song'\r\n\r\n@Component({\r\n  components: {\r\n    MusicList\r\n  }\r\n})\r\nexport default class TopList extends Vue {\r\n    @Getter('topList') topList!: GetTopListTopListItem;\r\n    private songs: CreateSongType[] = [];\r\n    get title () {\r\n      return this.topList.topTitle\r\n    }\r\n\r\n    get bgImage () {\r\n      if (this.songs.length) {\r\n        return this.songs[0].image\r\n      }\r\n      return ''\r\n    }\r\n\r\n    private rank = true\r\n    private created () {\r\n      this._getMusicList()\r\n    }\r\n\r\n    private _getMusicList () {\r\n      if (!this.topList.id) {\r\n        this.$router.push('/rank')\r\n        return\r\n      }\r\n      getMusicList(this.topList.id).then((res: GetMusicListResponse) => {\r\n        if (res.code === ERR_OK) {\r\n          this.songs = this._normalizeSongs(res.songlist)\r\n        }\r\n      })\r\n    }\r\n\r\n    private _normalizeSongs (list: GetMusicListSonglistItem[]): CreateSongType[] {\r\n      const ret: CreateSongType[] = []\r\n      list.forEach((item) => {\r\n        const musicData = item.data\r\n        if (musicData.songid && musicData.albummid) {\r\n          ret.push(createSong(musicData))\r\n        }\r\n      })\r\n      return ret\r\n    }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./top-list.vue?vue&type=template&id=5a561fd6&scoped=true&\"\nimport script from \"./top-list.vue?vue&type=script&lang=ts&\"\nexport * from \"./top-list.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./top-list.vue?vue&type=style&index=0&id=5a561fd6&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a561fd6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}